{"version":3,"file":"navigation.js","sources":["../src/navigation.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI (v4.2.0): navigation.js\n * Licensed under MIT (https://coreui.io/license)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin } from './util/index'\nimport Data from './dom/data'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport SelectorEngine from './dom/selector-engine'\nimport BaseComponent from './base-component'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'navigation'\nconst DATA_KEY = 'coreui.navigation'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst Default = {\n  activeLinksExact: true,\n  groupsAutoCollapse: true\n}\n\nconst DefaultType = {\n  activeLinksExact: 'boolean',\n  groupsAutoCollapse: '(string|boolean)'\n}\n\nconst CLASS_NAME_ACTIVE = 'active'\nconst CLASS_NAME_SHOW = 'show'\n\nconst CLASS_NAME_NAV_GROUP = 'nav-group'\nconst CLASS_NAME_NAV_GROUP_TOGGLE = 'nav-group-toggle'\n\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst SELECTOR_NAV_GROUP = '.nav-group'\nconst SELECTOR_NAV_GROUP_ITEMS = '.nav-group-items'\nconst SELECTOR_NAV_GROUP_TOGGLE = '.nav-group-toggle'\nconst SELECTOR_NAV_LINK = '.nav-link'\nconst SELECTOR_DATA_NAVIGATION = '[data-coreui=\"navigation\"]'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Navigation extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n    this._config = this._getConfig(config)\n    this._setActiveLink()\n    this._addEventListeners()\n\n    Data.set(element, DATA_KEY, this)\n  }\n  // Getters\n\n  static get Default() {\n    return Default\n  }\n\n  static get DATA_KEY() {\n    return DATA_KEY\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {})\n    }\n\n    return config\n  }\n\n  _setActiveLink() {\n    for (const element of Array.from(this._element.querySelectorAll(SELECTOR_NAV_LINK))) {\n      if (element.classList.contains(CLASS_NAME_NAV_GROUP_TOGGLE)) {\n        continue\n      }\n\n      let currentUrl = String(window.location)\n\n      const urlHasParams = /\\?.*=/\n      const urlHasQueryString = /\\?./\n      const urlHasHash = /#./\n\n      if (urlHasParams.test(currentUrl) || urlHasQueryString.test(currentUrl)) {\n        currentUrl = currentUrl.split('?')[0]\n      }\n\n      if (urlHasHash.test(currentUrl)) {\n        currentUrl = currentUrl.split('#')[0]\n      }\n\n      if (this._config.activeLinksExact && element.href === currentUrl) {\n        element.classList.add(CLASS_NAME_ACTIVE)\n        // eslint-disable-next-line unicorn/no-array-for-each\n        Array.from(this._getParents(element, SELECTOR_NAV_GROUP)).forEach(element => {\n          element.classList.add(CLASS_NAME_SHOW)\n          element.setAttribute('aria-expanded', true)\n        })\n      }\n\n      if (!this._config.activeLinksExact && element.href.startsWith(currentUrl)) {\n        element.classList.add(CLASS_NAME_ACTIVE)\n        // eslint-disable-next-line unicorn/no-array-for-each\n        Array.from(this._getParents(element, SELECTOR_NAV_GROUP)).forEach(element => {\n          element.classList.add(CLASS_NAME_SHOW)\n          element.setAttribute('aria-expanded', true)\n        })\n      }\n    }\n  }\n\n  _getParents(element, selector) {\n    // Setup parents array\n    const parents = []\n\n    // Get matching parent elements\n    for (; element && element !== document; element = element.parentNode) {\n      // Add matching parents to array\n      if (selector) {\n        if (element.matches(selector)) {\n          parents.push(element)\n        }\n      } else {\n        parents.push(element)\n      }\n    }\n\n    return parents\n  }\n\n  _getAllSiblings(element, filter) {\n    const siblings = []\n    element = element.parentNode.firstChild\n    do {\n      if (element.nodeType === 3) {\n        continue // text node\n      }\n\n      if (element.nodeType === 8) {\n        continue // comment node\n      }\n\n      if (!filter || filter(element)) {\n        siblings.push(element)\n      }\n\n    // eslint-disable-next-line no-cond-assign\n    } while (element = element.nextSibling)\n\n    return siblings\n  }\n\n  _getChildren(n, skipMe) {\n    const children = []\n    for (; n; n = n.nextSibling) {\n      if (n.nodeType === 1 && n !== skipMe) {\n        children.push(n)\n      }\n    }\n\n    return children\n  }\n\n  _getSiblings(element, filter) {\n    const siblings = this._getChildren(element.parentNode.firstChild, element).filter(filter)\n    return siblings\n  }\n\n  _slideDown(element) {\n    element.style.height = 'auto'\n    const height = element.clientHeight\n    element.style.height = '0px'\n    setTimeout(() => {\n      element.style.height = `${height}px`\n    }, 0)\n\n    this._queueCallback(() => {\n      element.style.height = 'auto'\n    }, element, true)\n  }\n\n  _slideUp(element, callback) {\n    const height = element.clientHeight\n    element.style.height = `${height}px`\n    setTimeout(() => {\n      element.style.height = '0px'\n    }, 0)\n\n    this._queueCallback(() => {\n      if (typeof callback === 'function') {\n        callback()\n      }\n    }, element, true)\n  }\n\n  _toggleGroupItems(event) {\n    let toggler = event.target\n    if (!toggler.classList.contains(CLASS_NAME_NAV_GROUP_TOGGLE)) {\n      toggler = toggler.closest(SELECTOR_NAV_GROUP_TOGGLE)\n    }\n\n    const filter = element => Boolean(element.classList.contains(CLASS_NAME_NAV_GROUP) && element.classList.contains(CLASS_NAME_SHOW))\n\n    // Close other groups\n    if (this._config.groupsAutoCollapse === true) {\n      for (const element of this._getSiblings(toggler.parentNode, filter)) {\n        this._slideUp(SelectorEngine.findOne(SELECTOR_NAV_GROUP_ITEMS, element), () => {\n          element.classList.remove(CLASS_NAME_SHOW)\n          element.setAttribute('aria-expanded', false)\n        })\n      }\n    }\n\n    if (toggler.parentNode.classList.contains(CLASS_NAME_SHOW)) {\n      this._slideUp(SelectorEngine.findOne(SELECTOR_NAV_GROUP_ITEMS, toggler.parentNode), () => {\n        toggler.parentNode.classList.remove(CLASS_NAME_SHOW)\n        toggler.parentNode.setAttribute('aria-expanded', false)\n      })\n      return\n    }\n\n    toggler.parentNode.classList.add(CLASS_NAME_SHOW)\n    toggler.parentNode.setAttribute('aria-expanded', true)\n    this._slideDown(SelectorEngine.findOne(SELECTOR_NAV_GROUP_ITEMS, toggler.parentNode))\n  }\n\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_CLICK_DATA_API, SELECTOR_NAV_GROUP_TOGGLE, event => {\n      event.preventDefault()\n      this._toggleGroupItems(event, this)\n    })\n  }\n\n  // Static\n\n  static navigationInterface(element, config) {\n    const data = Navigation.getOrCreateInstance(element, config)\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      Navigation.navigationInterface(this, config)\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const element of Array.from(document.querySelectorAll(SELECTOR_DATA_NAVIGATION))) {\n    Navigation.navigationInterface(element)\n  }\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Navigation to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Navigation)\n\nexport default Navigation\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","Default","activeLinksExact","groupsAutoCollapse","DefaultType","CLASS_NAME_ACTIVE","CLASS_NAME_SHOW","CLASS_NAME_NAV_GROUP","CLASS_NAME_NAV_GROUP_TOGGLE","EVENT_CLICK_DATA_API","EVENT_LOAD_DATA_API","SELECTOR_NAV_GROUP","SELECTOR_NAV_GROUP_ITEMS","SELECTOR_NAV_GROUP_TOGGLE","SELECTOR_NAV_LINK","SELECTOR_DATA_NAVIGATION","Navigation","BaseComponent","constructor","element","config","_config","_getConfig","_setActiveLink","_addEventListeners","Data","set","Manipulator","getDataAttributes","_element","Array","from","querySelectorAll","classList","contains","currentUrl","String","window","location","urlHasParams","urlHasQueryString","urlHasHash","test","split","href","add","_getParents","forEach","setAttribute","startsWith","selector","parents","document","parentNode","matches","push","_getAllSiblings","filter","siblings","firstChild","nodeType","nextSibling","_getChildren","n","skipMe","children","_getSiblings","_slideDown","style","height","clientHeight","setTimeout","_queueCallback","_slideUp","callback","_toggleGroupItems","event","toggler","target","closest","Boolean","SelectorEngine","findOne","remove","EventHandler","on","preventDefault","navigationInterface","data","getOrCreateInstance","TypeError","jQueryInterface","each","defineJQueryPlugin"],"mappings":"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"}